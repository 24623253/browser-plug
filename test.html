<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘ä¸‹è½½åŠ©æ‰‹ - æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .test-section h2 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        video {
            width: 100%;
            max-width: 640px;
            height: auto;
            border-radius: 8px;
            margin: 10px 0;
        }
        
        .test-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-size: 14px;
        }
        
        .test-steps {
            background: #fff3e0;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .test-steps ol {
            margin: 10px 0 0 20px;
        }
        
        .test-steps li {
            margin: 5px 0;
        }
        
        .link-section {
            background: #f3e5f5;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        
        .link-section a {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        
        .link-section a:hover {
            text-decoration: underline;
        }
        
        .status {
            padding: 10px 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #cce5ff;
            color: #004085;
            border: 1px solid #b3d7ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ è§†é¢‘ä¸‹è½½åŠ©æ‰‹ - æµ‹è¯•é¡µé¢</h1>
        
        <!-- æœ¬åœ°è§†é¢‘æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ“¹ æœ¬åœ°è§†é¢‘æµ‹è¯•</h2>
            <div class="test-info">
                <strong>ç”¨é€”ï¼š</strong>æµ‹è¯•æ’ä»¶åŸºæœ¬åŠŸèƒ½ï¼Œæ£€æµ‹HTML5è§†é¢‘å…ƒç´ 
            </div>
            
            <video controls poster="https://via.placeholder.com/640x360/667eea/ffffff?text=æµ‹è¯•è§†é¢‘">
                <source src="https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4" type="video/mp4">
                <source src="https://sample-videos.com/zip/10/webm/SampleVideo_1280x720_1mb.webm" type="video/webm">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
            
            <div class="test-steps">
                <strong>æµ‹è¯•æ­¥éª¤ï¼š</strong>
                <ol>
                    <li>ç¡®ä¿è§†é¢‘èƒ½æ­£å¸¸æ’­æ”¾</li>
                    <li>ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„æ’ä»¶å›¾æ ‡</li>
                    <li>åº”è¯¥æ˜¾ç¤º"æµ‹è¯•è§†é¢‘"ç›¸å…³ä¿¡æ¯</li>
                    <li>é€‰æ‹©ç”»è´¨å¹¶å°è¯•ä¸‹è½½</li>
                </ol>
            </div>
        </div>
        
        <!-- å¤šæ ¼å¼è§†é¢‘æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸ¦ å¤šæ ¼å¼è§†é¢‘æµ‹è¯•</h2>
            <div class="test-info">
                <strong>ç”¨é€”ï¼š</strong>æµ‹è¯•ä¸åŒè§†é¢‘æ ¼å¼çš„æ£€æµ‹èƒ½åŠ›
            </div>
            
            <!-- MP4 è§†é¢‘ -->
            <h3>MP4 æ ¼å¼</h3>
            <video controls>
                <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
            </video>
            
            <!-- WebM è§†é¢‘ -->
            <h3>WebM æ ¼å¼</h3>
            <video controls>
                <source src="https://sample-videos.com/zip/10/webm/SampleVideo_640x360_1mb.webm" type="video/webm">
            </video>
        </div>
        
        <!-- çœŸå®ç½‘ç«™æµ‹è¯• -->
        <div class="test-section">
            <h2>ğŸŒ çœŸå®ç½‘ç«™æµ‹è¯•</h2>
            <div class="test-info">
                <strong>ç”¨é€”ï¼š</strong>æµ‹è¯•åœ¨çœŸå®è§†é¢‘ç½‘ç«™ä¸Šçš„è¡¨ç°
            </div>
            
            <div class="link-section">
                <h3>YouTube æµ‹è¯•</h3>
                <p>è®¿é—®ä»»æ„YouTubeè§†é¢‘é¡µé¢æµ‹è¯•ï¼š</p>
                <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">
                    ğŸµ ç»å…¸æµ‹è¯•è§†é¢‘ (Rick Roll)
                </a>
                <div class="status info">
                    <strong>é¢„æœŸç»“æœï¼š</strong>æ£€æµ‹åˆ°è§†é¢‘ä½†æç¤ºä½¿ç”¨yt-dlpä¸‹è½½
                </div>
            </div>
            
            <div class="link-section">
                <h3>å“”å“©å“”å“©æµ‹è¯•</h3>
                <p>è®¿é—®Bç«™è§†é¢‘é¡µé¢æµ‹è¯•ï¼š</p>
                <a href="https://www.bilibili.com/video/BV1xx411c7mD" target="_blank">
                    ğŸ“º Bç«™ç»å…¸è§†é¢‘
                </a>
                <div class="status info">
                    <strong>é¢„æœŸç»“æœï¼š</strong>æ£€æµ‹åˆ°è§†é¢‘ä½†å¯èƒ½éœ€è¦ç™»å½•è·å–é«˜ç”»è´¨
                </div>
            </div>
            
            <div class="link-section">
                <h3>æŠ–éŸ³æµ‹è¯•</h3>
                <p>è®¿é—®æŠ–éŸ³ç½‘é¡µç‰ˆæµ‹è¯•ï¼š</p>
                <a href="https://www.douyin.com/" target="_blank">
                    ğŸ¤ æŠ–éŸ³ç½‘é¡µç‰ˆ
                </a>
                <div class="status info">
                    <strong>é¢„æœŸç»“æœï¼š</strong>å¯èƒ½èƒ½æ£€æµ‹åˆ°è§†é¢‘å¹¶ç›´æ¥ä¸‹è½½
                </div>
            </div>
        </div>
        
        <!-- è°ƒè¯•ä¿¡æ¯ -->
        <div class="test-section">
            <h2>ğŸ” è°ƒè¯•ä¿¡æ¯</h2>
            <div class="test-info">
                <strong>ç”¨é€”ï¼š</strong>æŸ¥çœ‹è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯å’Œæ—¥å¿—
            </div>
            
            <div class="test-steps">
                <strong>è°ƒè¯•æ­¥éª¤ï¼š</strong>
                <ol>
                    <li>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·</li>
                    <li>åˆ‡æ¢åˆ°Consoleæ ‡ç­¾é¡µ</li>
                    <li>è§¦å‘è§†é¢‘æ£€æµ‹æˆ–ä¸‹è½½</li>
                    <li>æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è¯¦ç»†æ—¥å¿—</li>
                </ol>
            </div>
            
            <div id="debug-info" class="status info">
                <strong>å½“å‰é¡µé¢è§†é¢‘å…ƒç´ ï¼š</strong>
                <div id="video-count">æ£€æµ‹ä¸­...</div>
                <div id="video-details"></div>
            </div>
        </div>
        
        <!-- å¸¸è§é—®é¢˜ -->
        <div class="test-section">
            <h2>â“ å¸¸è§é—®é¢˜</h2>
            
            <div class="status error">
                <strong>é—®é¢˜ï¼š</strong>æ’ä»¶å›¾æ ‡æ˜¯ç°è‰²çš„<br>
                <strong>è§£å†³ï¼š</strong>ç¡®ä¿åœ¨æ”¯æŒçš„è§†é¢‘ç½‘ç«™ä¸Šï¼Œæˆ–åˆ·æ–°é¡µé¢
            </div>
            
            <div class="status error">
                <strong>é—®é¢˜ï¼š</strong>æ˜¾ç¤º"æœªæ£€æµ‹åˆ°è§†é¢‘"<br>
                <strong>è§£å†³ï¼š</strong>ç¡®ä¿è§†é¢‘å¼€å§‹æ’­æ”¾ï¼Œç­‰å¾…åŠ è½½å®Œæˆ
            </div>
            
            <div class="status error">
                <strong>é—®é¢˜ï¼š</strong>ä¸‹è½½ä¸€ç›´æ˜¾ç¤º"å‡†å¤‡ä¸­"<br>
                <strong>è§£å†³ï¼š</strong>æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨å¤–éƒ¨å·¥å…·
            </div>
            
            <div class="status success">
                <strong>æˆåŠŸæ ‡å¿—ï¼š</strong>
                <ul style="margin: 5px 0 0 20px;">
                    <li>æ’ä»¶å›¾æ ‡æ˜¾ç¤ºç»¿è‰²å¯¹å‹¾</li>
                    <li>ç‚¹å‡»åæ˜¾ç¤ºè§†é¢‘ä¿¡æ¯</li>
                    <li>æœ‰å¤šä¸ªç”»è´¨é€‰é¡¹</li>
                    <li>ä¸‹è½½æŒ‰é’®å¯ç‚¹å‡»</li>
                </ul>
            </div>
        </div>
    </div>
    
    <script>
        // é¡µé¢åŠ è½½å®Œæˆåæ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            updateDebugInfo();
            
            // å®šæœŸæ›´æ–°è°ƒè¯•ä¿¡æ¯
            setInterval(updateDebugInfo, 3000);
        });
        
        function updateDebugInfo() {
            const videos = document.querySelectorAll('video');
            const countEl = document.getElementById('video-count');
            const detailsEl = document.getElementById('video-details');
            
            countEl.textContent = `å‘ç° ${videos.length} ä¸ªè§†é¢‘å…ƒç´ `;
            
            let details = '';
            videos.forEach((video, index) => {
                const src = video.src || video.currentSrc || 'æ— æºåœ°å€';
                const duration = video.duration || 0;
                const state = video.readyState;
                
                details += `
                    <div style="margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 4px;">
                        <strong>è§†é¢‘ ${index + 1}:</strong><br>
                        ğŸ“ åœ°å€: ${src.substring(0, 50)}${src.length > 50 ? '...' : ''}<br>
                        â±ï¸ æ—¶é•¿: ${duration ? Math.round(duration) + 'ç§’' : 'æœªçŸ¥'}<br>
                        ğŸ“Š çŠ¶æ€: ${getReadyStateText(state)}<br>
                        ğŸ“ å°ºå¯¸: ${video.videoWidth || '?'} Ã— ${video.videoHeight || '?'}
                    </div>
                `;
            });
            
            detailsEl.innerHTML = details || '<em>æš‚æ— è§†é¢‘è¯¦æƒ…</em>';
        }
        
        function getReadyStateText(state) {
            const states = {
                0: 'æœªåˆå§‹åŒ–',
                1: 'å…ƒæ•°æ®å·²åŠ è½½',
                2: 'å½“å‰å¸§å·²åŠ è½½',
                3: 'éƒ¨åˆ†æ•°æ®å¯ç”¨',
                4: 'å®Œå…¨å¯ç”¨'
            };
            return states[state] || 'æœªçŸ¥çŠ¶æ€';
        }
        
        // æ‰‹åŠ¨è§¦å‘è§†é¢‘æ£€æµ‹ï¼ˆå¦‚æœæ’ä»¶å·²å®‰è£…ï¼‰
        function testPluginDetection() {
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                try {
                    chrome.runtime.sendMessage({action: 'detectVideos'}, response => {
                        console.log('æ’ä»¶æ£€æµ‹ç»“æœ:', response);
                    });
                } catch (e) {
                    console.log('æ’ä»¶æœªå®‰è£…æˆ–æœªå¯ç”¨');
                }
            }
        }
        
        // åœ¨æ§åˆ¶å°æä¾›æµ‹è¯•å‡½æ•°
        window.testPlugin = testPluginDetection;
        console.log('æµ‹è¯•é¡µé¢å·²åŠ è½½ï¼Œåœ¨æ§åˆ¶å°è¿è¡Œ testPlugin() å¯æ‰‹åŠ¨æµ‹è¯•æ’ä»¶');
    </script>
</body>
</html>